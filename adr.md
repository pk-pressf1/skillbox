# Список ADR (Architectural Decision Records)

| №          | Название решения                                        | Суть                                                                                                                        | Статус           | Последствия                                                                                                                                                     | Риски                                                                                                                             |
|------------|---------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| **ADR-01** | **Event-Driven Microservices как основная архитектура** | Все сервисы взаимодействуют через асинхронные события (Kafka/Pulsar), а не синхронные REST-вызовы.                          | **Принято**      | • Высокая масштабируемость и устойчивость к пикам<br>• Естественная поддержка аналитики и реактивных фич<br>• Чёткое разделение ответственности между командами | • Повышенная сложность отладки распределённых потоков<br>• Требуется культура observability и event schema governance             |
| **ADR-02** | **Multi-cloud развёртывание без vendor lock-in**        | Использование Kubernetes, Terraform, OpenTelemetry; избегание proprietary-сервисов (например, AWS Lambda, Azure Functions). | **Принято**      | • Гибкость выбора провайдера под задачу<br>• Снижение рисков монополизации и ценовых шоков<br>• Соответствие внутренней ИТ-стратегии компании                   | • Увеличение сложности инфраструктурного кода<br>• Необходимость унификации CI/CD и мониторинга                                   |
| **ADR-03** | **Раздельные хранилища по типу данных**                 | PostgreSQL (профили), Neo4j (соц. связи), ClickHouse (активность и временные ряды).                                         | **Принято**      | • Максимальная производительность для каждого домена<br>• Гибкость в моделировании данных (граф vs реляционная vs колоночная)                                   | • Усложнение операционной поддержки (3 типа БД)<br>• Требуется единая стратегия резервного копирования и мониторинга              |
| **ADR-04** | **Централизованный Auth & Privacy Core**                | Единая точка управления идентификацией, согласиями и политиками приватности.                                                | **Принято**      | • Гарантированное соответствие GDPR/CCPA<br>• Упрощение аудита и управления доступом<br>• Единый UX для управления приватностью                                 | • Auth Core становится SPOF (single point of failure)<br>• Требует высокой доступности и отказоустойчивости                       |
| **ADR-05** | **Мобильное приложение как primary client**             | Веб-версия не разрабатывается на этапах MVP–ОПЭ; фокус на iOS/Android.                                                      | **Принято**      | • Оптимизация под ключевые сценарии (GPS, датчики, push)<br>• Снижение стоимости разработки и поддержки                                                         | • Ограниченный охват пользователей без смартфонов<br>• Потенциальная необходимость веб-версии в будущем (B2B: тренеры, федерации) |
| **ADR-06** | **Оффлайн-first подход для активности**                 | Тренировки записываются локально и синхронизируются при восстановлении сети.                                                | **Принято**      | • Поддержка активности в удалённых регионах (горы, леса)<br>• Повышение надёжности и доверия пользователей                                                      | • Сложность разрешения конфликтов при синхронизации<br>• Требуется локальное шифрование данных на устройстве                      |
| **ADR-07** | **Гибридная геймификация: правила + ML**                | Базовые достижения — по правилам («10 тренировок»), персонализированные челленджи — через ML-модели.                        | **В разработке** | • Баланс между предсказуемостью и персонализацией<br>• Возможность адаптации под поведение пользователя                                                         | • ML-модели требуют данных → эффект «холодного старта»<br>• Риск переусложнения логики начисления очков                           |
